(()=>{"use strict";let t,e=[],n=0;function a(){t=e,localStorage.localData=JSON.stringify(t)}function c(){return!!localStorage.getItem("localData")&&JSON.parse(localStorage.localData)}function i(){return e[n].taskList.length}function s(){return n}function o(){let t=new Date,e=t.getDate(),n=t.getMonth()+1,a=t.getFullYear();return e=e.toString(),n=n.toString(),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),(a+"-"+n+"-"+e).toString()}function l(){let t=new Date;t.setDate(t.getDate()+7);let e=t.getDate(),n=t.getMonth()+1,a=t.getFullYear();return e=e.toString(),n=n.toString(),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),(a+"-"+n+"-"+e).toString()}function d(t,e){return t.classList.add(e)}const r=document.querySelector(".projName"),u=(document.querySelector(".projEdit"),document.querySelector(".taskCont")),k=document.querySelector(".projectsList");let m=0;function p(t){let c=function(t){return e[n].taskList[t]}(t);const i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),l=document.createElement("img"),r=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),g=document.createElement("div"),v=document.createElement("img"),f=document.createElement("div"),h=document.createElement("img");function y(){!function(t){S=!0;const a=e[n].taskList[t];E.style.display="flex",newTaskBtn.style.display="none",taskNameInput.value=a.taskName,taskDescInput.value=a.taskDesc,N.value=a.taskDueDate,I=a.taskStar,B(),L=t}(t)}d(i,"taskBox"),d(s,"taskCheckBoxCont"),d(o,"taskCheckBox"),d(l,"taskTick"),d(r,"taskNameCont"),d(k,"taskName"),d(m,"taskDateCont"),d(p,"taskDate"),d(g,"taskStarCont"),d(v,"taskStarIcon"),d(f,"taskDelCont"),d(h,"taskDelIcon"),l.src="./images/tick.png",h.src="./images/deleteIcon.png",0==e[n].taskList[t].taskStar?v.src="./images/importantIcon.png":v.src="./images/importantIconActive.png",k.textContent=e[n].taskList[t].taskName.value,k.textContent=c.taskName,l.style.display="none",p.textContent=e[n].taskList[t].taskDueDate,u.appendChild(i),i.appendChild(s),s.appendChild(o),o.appendChild(l),i.appendChild(r),r.appendChild(k),i.appendChild(m),m.appendChild(p),i.appendChild(g),g.appendChild(v),i.appendChild(f),f.appendChild(h),0==e[n].taskList[t].taskChecked?l.style.display="none":l.style.display="inline-block",h.addEventListener("click",(function(){const c=i;e[n].taskList[t].taskActive=!1,a(),c.remove()})),o.addEventListener("click",(function(){0==c.taskChecked?(c.taskChecked=!0,l.style.display="inline-block"):(c.taskChecked=!1,l.style.display="none"),a()})),g.addEventListener("click",(function(){0==c.taskStar?(c.taskStar=!0,v.src="./images/importantIconActive.png"):(c.taskStar=!1,v.src="./images/importantIcon.png"),a()})),k.addEventListener("click",y),p.addEventListener("click",y)}function g(t){const n=document.createElement("div"),c=document.createElement("div"),i=document.createElement("img"),s=e[t].index;d(n,"projectBox"),d(c,"projectName"),d(i,"projectDelImg"),i.src="./images/deleteIcon.png",k.appendChild(n),n.appendChild(c),n.appendChild(i),c.textContent=e[s].projectName,i.addEventListener("click",(function(){n.remove(),e[s].active=!1,a(),function(){let t=null;for(let n=0;n<e.length;n++)1==e[n].active?t=n:h(),v(t)}()})),c.addEventListener("click",(function(){v(s)})),v(s)}function v(t){null==t?(r.textContent="No Project Selected",n=0):(r.textContent=e[t].projectName,n=t,h(),f())}function f(){if(m=0,i()>0)for(let t=0;t<i();t++)1==e[n].taskList[t].taskActive&&(m=t,p(m))}function h(){for(;u.firstChild;)u.removeChild(u.firstChild)}const y=function(){const t=document.getElementById("newProjInput");document.querySelector(".projectsList"),t.value?t.value.length>=19?t.value=t.value.slice(0,18).concat("..."):t.value:t.value="Untitled Project "+(e.length+1);const n=new function(t){this.projectName=t,this.index=e.length,this.active=!0,this.taskList=[]}(t.value);e.push(n),t.value="",g(e.length-1),a()},E=document.getElementById("taskEditorCont"),D=document.querySelector(".taskEditorStarIcon");let L,I=!1,C=!1,S=!1,N=document.getElementById("taskDateInput");function B(){D.src=0==I?"./images/importantIcon.png":"./images/importantIconActive.png"}function j(){E.style.display="none",newTaskBtn.style.display="inline-block",taskNameInput.value="",taskDescInput.value="",I=!1}D.src="./images/importantIcon.png",D.addEventListener("click",(function(){0==I?(I=!0,D.src="./images/importantIconActive.png",C=!0):(I=!1,D.src="./images/importantIcon.png",C=!1)}));const w=document.getElementById("projectNameEditorCont"),x=document.querySelector(".pneBtn");let q=document.getElementById("pneInput");function b(){w.style.display="none"}x.addEventListener("click",(function(){if(q.value&&0!=q.value.length){let t=n;e[n].projectName=q.value,function(){for(;k.firstChild;)k.removeChild(k.firstChild);for(let t=0;t<e.length;t++)1==e[t].active&&(g(t),console.log(t))}(),v(t),a(),b()}else b()}));const A=document.querySelector(".taskEditorClose"),T=document.getElementById("newTaskBtn"),P=document.getElementById("newProjBtn"),U=document.getElementById("confirmBtn"),F=(document.getElementById("taskNameInput"),document.getElementById("taskDescInput"),document.getElementById("taskDateInput"),document.querySelector(".projEdit")),J=document.querySelector(".tabImportant"),M=document.querySelector(".tabTasks"),O=document.querySelector(".tabToday"),Y=document.querySelector(".tabUpcoming"),z=document.querySelector(".tabLater"),G=document.querySelector(".title");A.addEventListener("click",j),T.addEventListener("click",(function(){E.style.display="flex",newTaskBtn.style.display="none",C=!1,N.value=o(),B()})),U.addEventListener("click",(function(){S?(function(){const t=e[n].taskList[L];t.taskName=taskNameInput.value,t.taskDesc=taskDescInput.value,t.taskDueDate=N.value,t.taskStar=I,h(),f(),a(),j()}(),S=!1):function(){if(null==e[s()]&&y(),1==function(){let t=!1;for(let n=0;n<e.length;n++)return 1==e[n].active&&(t=!0),t}()){function t(t,e,n,a){this.taskIndex=t,this.taskDesc=n,this.taskChecked=!1,this.taskDueDate=a,this.taskStar=C,this.taskActive=!0,e?e.length>=30?this.taskName=e.slice(0,29).concat("..."):this.taskName=e:this.taskName="Untitled Task "+(t+1)}const n=new t(i(),taskNameInput.value,taskDescInput.value,taskDateInput.value);e[s()].taskList.push(n),j(),p(i()-1)}else j();a()}()})),G.addEventListener("click",(function(){localStorage.clear(),location.reload()})),P.addEventListener("click",y),F.addEventListener("click",(function(){let t=!1;if(e.length>0)for(let n=0;n<=e.length;n++)if(1==e[n].active){t=!0;break}1==t?(w.style.display="flex",q.value=e[n].projectName):b()})),J.addEventListener("click",(function(){h();for(let t=0;t<e[n].taskList.length;t++)1==e[n].taskList[t].taskStar&&1==e[n].taskList[t].taskActive&&p(t)})),M.addEventListener("click",(function(){h(),f()})),O.addEventListener("click",(function(){let t=o();h();for(let a=0;a<e[n].taskList.length;a++)e[n].taskList[a].taskDueDate==t&&p(a)})),Y.addEventListener("click",(function(){let t,a=o(),c=l(),i=new Date(a),s=new Date(c);h();for(let a=0;a<e[n].taskList.length;a++)t=new Date(e[n].taskList[a].taskDueDate),t>=i&&t<=s&&p(a)})),z.addEventListener("click",(function(){let t,a=o(),c=l(),i=(new Date(a),new Date(c));h();for(let a=0;a<e[n].taskList.length;a++)t=new Date(e[n].taskList[a].taskDueDate),t>i&&p(a)})),c()?function(){e=c();for(let t=0;t<e.length;t++)1==e[t].active&&g(t)}():v()})();